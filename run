#!/bin/bash

# Simple run script for starting frontend and backend
# Usage: ./run [command]

case "$1" in
    "both"|"")
        echo "Starting both frontend and backend..."
        npx concurrently \
            --names "frontend,backend" \
            --prefix-colors "cyan,magenta" \
            "cd frontend && npm run dev" \
            "cd backend && npm run dev"
        ;;
    "frontend")
        echo "Starting frontend..."
        cd frontend && npm run dev
        ;;
    "backend")
        echo "Starting backend..."
        cd backend && npm run dev
        ;;
    "dev")
        echo "Starting development servers..."
        npx concurrently \
            --names "frontend,backend" \
            --prefix-colors "cyan,magenta" \
            "cd frontend && npm run dev" \
            "cd backend && npm run dev"
        ;;
    "install")
        echo "Installing dependencies for both projects..."
        echo "Installing frontend dependencies..."
        cd frontend && npm install
        echo "Installing backend dependencies..."
        cd ../backend && npm install
        echo "All dependencies installed!"
        ;;
    "help"|"-h"|"--help")
        echo "Usage: ./run [command]"
        echo ""
        echo "Commands:"
        echo "  both (default)  - Start both frontend and backend"
        echo "  frontend        - Start only frontend"
        echo "  backend         - Start only backend"
        echo "  dev             - Start both in development mode"
        echo "  install         - Install dependencies for both projects"
        echo "  help            - Show this help message"
        ;;
    *)
        echo "Unknown command: $1"
        echo "Use './run help' for usage information"
        exit 1
        ;;
esac
